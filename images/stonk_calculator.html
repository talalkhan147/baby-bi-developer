<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Pauli's Happy Calculator</title>

    <link rel="stylesheet" href="styles.css">

</head>

<body>

    <h1>Loading Calculator...</h1>

    <script>

    
const onlineUrl = "https://raw.githack.com/talalkhan147/Stock-Calculator/main/index.html";
async function checkAndUpdateCode() {

    try {

        // Try to fetch the latest code from the online source

        const response = await fetch(onlineUrl, { cache: "no-store" });

        if (!response.ok) throw new Error("Failed to fetch online code");

        const onlineCode = await response.text();

        const localCode = localStorage.getItem("calculatorCode");

        // If the online version is different, update local storage

        if (localCode !== onlineCode) {

            localStorage.setItem("calculatorCode", onlineCode);

            console.log("Local storage updated with new code");

        }

        // Load the calculator from the latest fetched code

        document.body.innerHTML = onlineCode;

    } catch (error) {

        console.log("Offline mode: Loading cached version");

        document.body.innerHTML = localStorage.getItem("calculatorCode") || "<h1>Offline: No cached version found</h1>";

    }

}

// Run the function when the page loads

checkAndUpdateCode();

    

   </script>

</body>

</html>
